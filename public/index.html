<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1"
    />
    <title>Network Event Priority Scoring Dashboard</title>
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
      crossorigin="anonymous"
    />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="dashboard">
      <aside class="sidebar" aria-label="Primary navigation">
        <div class="sidebar__brand">
          <span class="sidebar__accent"></span>
          <div>
            <p class="sidebar__title">SecOps Command</p>
            <p class="sidebar__subtitle">Network Priority Suite</p>
          </div>
        </div>

        <nav class="sidebar__nav">
          <a href="#filters">Filters</a>
          <a href="#kpi-section">KPIs</a>
          <a href="#charts">Charts</a>
          <a href="#events">Events</a>
        </nav>

        <div class="sidebar__footer">
          <p class="sidebar__status">Live telemetry</p>
          <p class="sidebar__hint">Data refreshes every 60 seconds</p>
        </div>
      </aside>

      <main class="main">
        <header class="top-bar">
          <div class="top-bar__left">
            <h1>Network Event Priority Scoring</h1>
            <p class="top-bar__subtitle">
              Monitor threat posture, prioritize response, and track mitigation KPIs in real time.
            </p>
          </div>
          <div class="top-bar__right">
            <button id="refresh-button" type="button">Refresh Data</button>
            <div class="top-bar__meta">
              <span class="dot"></span>
              <span>Last updated</span>
              <time id="last-updated" datetime="">--</time>
            </div>
          </div>
        </header>

        <section id="filters" class="filters" aria-label="Filter controls">
          <div class="filters__group">
            <label for="from-filter">From</label>
            <input id="from-filter" type="datetime-local" />
          </div>
          <div class="filters__group">
            <label for="to-filter">To</label>
            <input id="to-filter" type="datetime-local" />
          </div>
          <div class="filters__group">
            <label for="label-filter">Label</label>
            <select id="label-filter">
              <option value="">All labels</option>
              <option value="Normal">Normal</option>
              <option value="Anomaly">Anomaly</option>
              <option value="Malicious">Malicious</option>
              <option value="Suspicious">Suspicious</option>
            </select>
          </div>
          <div class="filters__group">
            <label for="ip-filter">Destination IP</label>
            <input
              id="ip-filter"
              type="search"
              placeholder="e.g. 203.0.113.5"
              autocomplete="off"
              inputmode="numeric"
            />
          </div>
          <div class="filters__group filters__group--wide">
            <label for="score-filter">Score threshold</label>
            <input id="score-filter" type="range" min="0" max="100" step="1" />
            <div class="filters__range-value">
              <span id="score-filter-value">0</span>
            </div>
          </div>
        </section>

        <section id="kpi-section" class="section">
          <div class="section__heading">
            <h2>Key Performance Indicators</h2>
            <p>Live signal of aggregated threat events.</p>
          </div>
          <div class="kpi-grid" data-kpi-grid>
            <article class="card card--kpi">
              <span class="card__label">Total Events</span>
              <span class="card__value" id="kpi-total-events">—</span>
              <span class="card__trend" id="kpi-total-trend">Awaiting data…</span>
            </article>
            <article class="card card--kpi">
              <span class="card__label">High Priority</span>
              <span class="card__value" id="kpi-high-priority">—</span>
              <span class="card__trend" id="kpi-high-trend">Awaiting data…</span>
            </article>
            <article class="card card--kpi">
              <span class="card__label">Average Score</span>
              <span class="card__value" id="kpi-average-score">—</span>
              <span class="card__trend" id="kpi-score-trend">Awaiting data…</span>
            </article>
          </div>
        </section>

        <section id="charts" class="section">
          <div class="section__heading">
            <h2>Network Insights</h2>
            <p>Visual analysis of threat posture (coming soon).</p>
          </div>
          <div class="panel charts-placeholder">
            <p>Charts will appear here once integrated.</p>
          </div>
        </section>

        <section id="events" class="section">
          <div class="section__heading section__heading--row">
            <div>
              <h2>Event Stream</h2>
              <p>Priority ordered network telemetry with contextual recommendations.</p>
            </div>
            <span class="chip" id="event-count">0 events</span>
          </div>

          <div class="status-indicators">
            <div class="loading" id="loading-indicator" hidden>
              <span class="loading__spinner"></span>
              <span>Loading latest telemetry…</span>
            </div>
            <div class="error" id="error-banner" hidden>
              <span role="img" aria-label="Warning">⚠️</span>
              <p id="error-message">Unable to load events.</p>
            </div>
          </div>

          <div class="table-wrapper">
            <table class="events-table">
              <thead>
                <tr>
                  <th scope="col">Time</th>
                  <th scope="col">Source</th>
                  <th scope="col">Destination</th>
                  <th scope="col">Label</th>
                  <th scope="col">Score</th>
                  <th scope="col">Action</th>
                </tr>
              </thead>
              <tbody id="event-table-body">
                <tr class="skeleton-row">
                  <td colspan="6">
                    <div class="skeleton"></div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
      </main>
    </div>

    <template id="event-row-template">
      <tr>
        <td data-timestamp>—</td>
        <td>
          <div class="event-name" data-source-name>—</div>
          <div class="event-rule" data-source-ip></div>
        </td>
        <td>
          <div class="event-name" data-destination-name>—</div>
          <div class="event-rule" data-destination-ip></div>
        </td>
        <td data-label>—</td>
        <td class="score-cell">
          <span class="score-chip" data-score>0</span>
        </td>
        <td>
          <span class="score-meta" data-action>OBSERVE</span>
        </td>
      </tr>
    </template>

    <script type="module" src="./scoring-engine.js"></script>
    <script type="module" src="./app.js"></script>
  </body>
</html>
